<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Multipurpose multilanguage Discord bot with many features for your Discord server. Log out of your Discord account here.">
		<meta name="theme-color" content="#ed8721">
		<link rel="alternate" hreflang="de-DE" href="https://tomatenkuchen.com/logout">

		<title>TomatenKuchen - Discord account logout</title>
		<link href="./assets/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
		<link href="./assets/images/apple-icon-120.png" rel="apple-touch-icon" sizes="120x120">
		<link href="./assets/images/apple-icon-152.png" rel="apple-touch-icon" sizes="152x152">

		<link href="./assets/style.css" rel="stylesheet" type="text/css">

		<script src="./assets/js/script.js"></script>
		<script src="./assets/js/api.js"></script>
	</head>
	<body class="dark-theme">
		<div class="center">
			<h1>Logging you out...</h1>
			<h2>You'll be redirected to the home page automatically after success.</h2>
		</div>
		<script>
			logout().then(json => {
				if (getCookie("token")) deleteCookie("token")
				if (getCookie("user")) deleteCookie("user")
				if (getCookie("avatar")) deleteCookie("avatar")

				if (json.status == "success") location.href = location.protocol + "//" + location.host + "/"
				else {
					document.body.innerHTML =
						"<div class='center'>" +
						"<h1>An error occured while handling your request:</h1>" +
						"<h2>" + json.message + "</h2>" +
						"<h3>You still were logged out in the browser.</h3>" +
						"</div>"

					setTimeout(() => {
						location.href = location.protocol + "//" + location.host + "/"
					}, 3500)
				}
			})
		</script>
	</body>
</html>
