<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Multipurpose german/english Discord bot including many features for your Discord server. Logout of your Discord Account here."/>
		<meta name="theme-color" content="#ed8721">
		<link rel="alternate" hreflang="de-DE" href="/logout/" />

		<title>TomatenKuchen - Discord Account Logout</title>
		<link href="../assets/images/icon.ico" rel="shortcut icon" type="image/x-icon"/>
		<link href="../assets/images/icon.ico" rel="icon" type="image/x-icon"/>
		<link href="../assets/images/apple-icon-120.png" rel="apple-touch-icon" sizes="120x120" />
		<link href="../assets/images/apple-icon-152.png" rel="apple-touch-icon" sizes="152x152" />

		<link href="../assets/style.css" rel="stylesheet" type="text/css"/>

		<script src="../assets/js/script.js"></script>
		<script src="../assets/js/api/api.js"></script>
	</head>
	<body class="dark-theme">
		<center>
			<h1>Die Abmeldung erfolgt...</h1>
			<h2>Du wirst auf die Startseite geleitet, wenn die Abmeldung erfolgreich war!</h2>
		</center>
		<script>
			logout().then(json => {
				if (getCookie("token")) deleteCookie("token");
				if (getCookie("user")) deleteCookie("user");
				if (getCookie("avatar")) deleteCookie("avatar");

				if (json.status == 'success') location.href = 'https://' + location.host + '/';
				else {
					document.body.innerHTML = '<center>' +
						'<h1>Es gab einen Fehler beim Verarbeiten der API-Abfrage!</h1><br>' +
						'<h1>' + json.message + '</h1>' +
						'<h2>Du wurdest trotzdem aus dem Browser abgemeldet.</h2>' +
						'</center>';

					setTimeout(() => {
						location.href = 'https://' + location.host + '/';
					}, 4000);
				};
			});
		</script>
	</body>
</html>
